[Unit]
Description=Smart Oven API (Docker Container)
After=docker.service
Requires=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
User=root
WorkingDirectory=/home/samuel/actions-runner/_work/smart_oven/smart_oven/api
ExecStartPre=/bin/bash -c 'iptables -A INPUT -p tcp --dport 8081 -j ACCEPT 2>/dev/null || true'
ExecStart=/usr/bin/docker compose up -d --build
ExecStop=/usr/bin/docker compose down
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
